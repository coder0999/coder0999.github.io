import{n as N,h as y,p as A,r as l,j as e}from"./index-CXLLT8_k.js";const k=()=>{const{examId:u}=N(),h=y(),p=A(),{exam:a}=p.state||{},[i,f]=l.useState(()=>a?new Array(a.questions.length).fill(null):[]),[r,g]=l.useState(()=>a?(a.duration||30)*60:0),[b,d]=l.useState(!1),o=()=>{h(`/results/${u}`,{state:{userAnswers:i,exam:a}})};l.useEffect(()=>{if(r===0&&a&&o(),!r)return;const s=setInterval(()=>{g(r-1)},1e3);return()=>clearInterval(s)},[r]);const j=(s,t)=>{const n=[...i];n[s]=t,f(n)},w=()=>{i.every(t=>t!==null)?o():d(!0)};if(!a)return e.jsx("div",{children:"Exam not found. Please go back and try again."});const v=s=>{const t=Math.floor(s/60),n=s%60;return`${t}:${n<10?"0":""}${n}`};return e.jsxs("div",{className:"py-4 flex-grow",children:[b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl text-center w-11/12 md:w-auto",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"تحذير"}),e.jsx("p",{className:"mb-6",children:"لم تقم بالإجابة على جميع الأسئلة. هل أنت متأكد أنك تريد تسليم الامتحان؟"}),e.jsxs("div",{className:"flex justify-center space-x-4 space-x-reverse",children:[e.jsx("button",{onClick:o,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg",children:"نعم، قم بالتسليم"}),e.jsx("button",{onClick:()=>d(!1),className:"bg-gray-500 text-white font-bold py-2 px-6 rounded-lg",children:"لا، ارجع للأسئلة"})]})]})}),e.jsx("div",{id:"exam-timer",className:"fixed top-4 left-4 bg-red-500 text-white p-2 rounded-lg shadow-lg",children:v(r)}),e.jsx("h2",{id:"exam-title",className:"text-3xl md:text-4xl font-bold text-gray-800 text-center mb-6",children:a.name}),e.jsx("div",{id:"questions-container",className:"space-y-8",children:a.questions.map((s,t)=>e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md relative w-full md:h-[80vh]",children:[e.jsx("div",{className:"question-number-box",children:e.jsx("span",{children:t+1})}),e.jsx("div",{className:"question-points-box",children:e.jsxs("span",{children:[s.points||1," نقطة"]})}),e.jsx("p",{className:"text-lg md:text-3xl text-gray-800 mb-4 break-words pt-16",children:s.text}),e.jsx("div",{className:"space-y-3 md:space-y-8",children:s.options.map((n,x)=>{const c=typeof n=="string"?n:n.text,m=`option-${t}-${x}`;return e.jsxs("div",{className:"custom-radio p-2 rounded-lg",children:[e.jsx("input",{type:"radio",id:m,name:`question-${t}`,value:c,onChange:()=>j(t,c),className:"form-radio"}),e.jsx("label",{htmlFor:m,className:"text-gray-700 text-base md:text-2xl",children:c})]},x)})})]},t))}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{onClick:w,className:"bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform",children:"تسليم"})})]})};export{k as default};
