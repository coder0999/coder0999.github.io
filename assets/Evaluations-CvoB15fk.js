import{r as c,c as f,q as p,o as x,a as m,d as b,j as n,z as h}from"./index-BMM5eybz.js";const g=()=>{const[a,e]=c.useState([]),[s,r]=c.useState(!0);return c.useEffect(()=>{const o=f(b,"subjects"),d=p(o,x("createdAt","desc")),u=m(d,t=>{const l=t.docs.map(i=>({...i.data(),id:i.id}));e(l),r(!1)},t=>{console.error("Error fetching subjects:",t),r(!1)});return()=>u()},[]),{subjects:a,loading:s}},j=({isVisible:a})=>{const e=c.useRef(null);return c.useEffect(()=>{if(e.current&&(e.current.innerHTML=""),a){const s={key:"1e6dd8f1d4565118e8eb4bf9fd2b359a",format:"iframe",height:250,width:300,params:{}},r=document.createElement("script");r.type="text/javascript",r.innerHTML=`atOptions = ${JSON.stringify(s)};`,e.current.appendChild(r);const o=document.createElement("script");o.type="text/javascript",o.src="https://www.highperformanceformat.com/1e6dd8f1d4565118e8eb4bf9fd2b359a/invoke.js",e.current.appendChild(o)}return()=>{e.current&&(e.current.innerHTML="")}},[a]),n.jsx("div",{ref:e,className:"ad-container w-[300px] h-[250px] mx-auto my-4 flex items-center justify-center bg-gray-100"})},y=({onSkip:a,isVisible:e})=>{const[s,r]=c.useState(4);c.useEffect(()=>{if(e&&s>0){const d=setTimeout(()=>{r(s-1)},1e3);return()=>clearTimeout(d)}},[s,e]),c.useEffect(()=>{e&&r(4)},[e]);const o=()=>{s===0&&a()};return n.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ${e?"":"hidden"}`,children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"إعلان"}),n.jsx(j,{isVisible:e})," ",n.jsx("button",{onClick:o,disabled:s>0,className:`mt-4 px-6 py-2 rounded ${s>0?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:s>0?`تخطي (${s})`:"تخطي"})]})})},k=()=>{const{subjects:a}=g(),[e,s]=c.useState(!1),[r,o]=c.useState(null),d=(t,l)=>{t.preventDefault(),o(l),s(!0)},u=()=>{if(s(!1),r){h.success("جاري التنزيل...",{style:{border:"1px solid #007bff",padding:"16px",color:"#007bff",background:"#fff"},iconTheme:{primary:"#007bff",secondary:"#fff"}});const t=document.createElement("a");t.href=r.link,t.download=r.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}};return n.jsxs("div",{className:"container mx-auto p-4 flex-grow",children:[n.jsx(y,{onSkip:u,isVisible:e}),n.jsx("div",{id:"subjects-container",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length===0?n.jsx("p",{className:"col-span-full text-center text-gray-600",children:"لا توجد مواد متاحة."}):a.map((t,l)=>n.jsxs("a",{href:t.link||"#",download:t.name,rel:"noopener noreferrer",className:"bg-white rounded-xl shadow-md p-6 flex flex-col items-center justify-center space-y-4 cursor-pointer no-underline",onClick:i=>d(i,t),children:[n.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-800 text-center",children:t.name}),n.jsxs("div",{className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 space-x-reverse",children:[n.jsx("i",{className:"fas fa-download"}),n.jsx("span",{children:"تنزيل"})]})]},l))})]})};export{k as default};
